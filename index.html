<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pulse Point Hospital</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div id="app">
    <header>
      <h1>Pulse Point Hospital</h1>
      <div class="stats">
        <div>Day <span id="stat-day">1</span></div>
        <div>Cash ¤<span id="stat-cash">150,000</span></div>
        <div>Reputation <span id="stat-reputation">50</span></div>
        <div>Patients Treated <span id="stat-treated">0</span></div>
        <div>Environment <span id="stat-environment">55</span></div>
        <div>Patient Welfare <span id="stat-welfare">55</span></div>
      </div>
    </header>

    <main>
      <aside class="menu-rail" aria-label="Primary navigation">
        <div class="menu-block">
          <h2 class="menu-heading">Functions</h2>
          <nav class="tabs" role="tablist">
            <button class="tab-button active" data-tab="overview" role="tab">Overview</button>
            <button class="tab-button" data-tab="build" role="tab">Build</button>
            <button class="tab-button" data-tab="staff" role="tab">Staff</button>
            <button class="tab-button" data-tab="research" role="tab">Research</button>
            <button class="tab-button" data-tab="marketing" role="tab">Marketing</button>
          </nav>
        </div>
        <div class="menu-block">
          <h2 class="menu-heading">Options</h2>
          <div class="menu-options" role="list">
            <button
              class="menu-option"
              role="listitem"
              data-tab-target="overview"
              data-panel="#panel-policies"
            >
              Hospital Policies
            </button>
            <button
              class="menu-option"
              role="listitem"
              data-tab-target="overview"
              data-panel="#panel-finance"
            >
              Finance &amp; Loans
            </button>
            <button
              class="menu-option"
              role="listitem"
              data-tab-target="build"
              data-panel="#panel-grounds"
            >
              Ground Expansion
            </button>
            <button
              class="menu-option"
              role="listitem"
              data-tab-target="build"
              data-panel="#panel-designer"
            >
              Room Designer
            </button>
            <button
              class="menu-option"
              role="listitem"
              data-tab-target="build"
              data-panel="#panel-room-management"
            >
              Room Management
            </button>
            <button
              class="menu-option"
              role="listitem"
              data-tab-target="staff"
              data-panel="#panel-staff-hire"
            >
              Staff Hiring
            </button>
            <button
              class="menu-option"
              role="listitem"
              data-tab-target="staff"
              data-panel="#panel-staff-roster"
            >
              Staff Roster
            </button>
            <button
              class="menu-option"
              role="listitem"
              data-tab-target="research"
              data-panel="#tab-research"
            >
              Research Projects
            </button>
            <button
              class="menu-option"
              role="listitem"
              data-tab-target="marketing"
              data-panel="#tab-marketing"
            >
              Marketing Campaigns
            </button>
          </div>
        </div>
        <div class="menu-block">
          <h2 class="menu-heading">Game</h2>
          <div class="menu-options">
            <button
              class="menu-option"
              data-modal="save"
              data-tab-target="*"
              id="open-save-menu"
              type="button"
            >
              Save &amp; Load
            </button>
            <button
              class="menu-option"
              id="toggle-music"
              type="button"
              aria-pressed="true"
              data-audio-toggle
            >
              Music: On
            </button>
            <button
              class="menu-option"
              id="toggle-sfx"
              type="button"
              aria-pressed="true"
              data-audio-toggle
            >
              Sound Effects: On
            </button>
          </div>
        </div>
      </aside>

      <section class="sidebar tab-content" aria-label="Game controls">
        <section id="tab-overview" class="tab-panel active" role="tabpanel">
          <h2>Hospital Overview</h2>
          <p>Balance your hospital's prestige, finance, and patient care. Keep staff happy and the wards running smoothly.</p>
          <div class="meter">
            <label for="meter-cleanliness">Cleanliness</label>
            <progress id="meter-cleanliness" value="80" max="100"></progress>
          </div>
          <div class="meter">
            <label for="meter-efficiency">Efficiency</label>
            <progress id="meter-efficiency" value="65" max="100"></progress>
          </div>
          <div class="meter">
            <label for="meter-morale">Staff Morale</label>
            <progress id="meter-morale" value="70" max="100"></progress>
          </div>
          <div class="meter">
            <label for="meter-grounds">Grounds Care</label>
            <progress id="meter-grounds" value="72" max="100"></progress>
          </div>
          <div class="meter">
            <label for="meter-plants">Plant Health</label>
            <progress id="meter-plants" value="78" max="100"></progress>
          </div>
          <div class="policies" id="panel-policies">
            <h3>Hospital Policies</h3>
            <label>
              <input type="checkbox" id="policy-fast-track" />
              Fast-track emergency patients (higher cost, reputation boost)
            </label>
            <label>
              <input type="checkbox" id="policy-overtime" />
              Offer overtime pay (reduces morale loss, adds wage cost)
            </label>
          </div>
          <section id="panel-finance" class="finance-panel" aria-label="Hospital finance options">
            <h3>Finance &amp; Billing</h3>
            <p>Secure loans for expansion and monitor how patients settle their care costs.</p>
            <div class="loan-offers" id="loan-offers"></div>
            <div class="finance-status">
              <div>
                <h4>Active Loans</h4>
                <ul id="active-loans" class="loan-list"></ul>
              </div>
              <div>
                <h4>Patient Receivables</h4>
                <div id="receivables-summary" class="receivables-summary"></div>
              </div>
            </div>
          </section>
        </section>

        <section id="tab-build" class="tab-panel" role="tabpanel">
          <h2>Build Rooms</h2>
          <p>Select a room type and tailor its layout, interior, and equipment before placing it on the grid.</p>
          <section id="panel-grounds" class="property-panel" aria-label="Hospital grounds">
            <h3>Hospital Grounds</h3>
            <p class="property-intro">
              Purchase additional lots to expand the buildable blueprint. Owned parcels are listed below.
            </p>
            <ul id="property-owned" class="property-owned"></ul>
            <div id="property-market" class="property-market"></div>
          </section>
          <div class="build-menu" id="build-menu">
            <div class="build-menu__tabs" role="tablist" aria-label="Build categories">
              <button
                type="button"
                class="build-menu__tab active"
                data-build-tab="rooms"
                role="tab"
                aria-selected="true"
              >
                Rooms
              </button>
              <button
                type="button"
                class="build-menu__tab"
                data-build-tab="interiors"
                role="tab"
                aria-selected="false"
              >
                Interiors
              </button>
              <button
                type="button"
                class="build-menu__tab"
                data-build-tab="amenities"
                role="tab"
                aria-selected="false"
              >
                Amenities
              </button>
            </div>
            <div class="build-menu__panel active" id="build-menu-rooms" role="tabpanel"></div>
            <div class="build-menu__panel" id="build-menu-interiors" role="tabpanel" aria-hidden="true"></div>
            <div class="build-menu__panel" id="build-menu-amenities" role="tabpanel" aria-hidden="true"></div>
          </div>
          <section id="panel-designer" class="designer-panel" aria-label="Room designer">
            <h3>Room Designer</h3>
            <div class="designer-row">
              <label for="designer-size">Layout Size</label>
              <select id="designer-size"></select>
            </div>
            <div class="designer-row">
              <label for="designer-theme">Interior Theme</label>
              <select id="designer-theme"></select>
            </div>
            <div class="designer-row">
              <h4>Equipment</h4>
              <div id="designer-machines" class="designer-options" role="group" aria-label="Equipment options"></div>
            </div>
            <div class="designer-row">
              <h4>Decorations</h4>
              <div id="designer-decor" class="designer-options" role="group" aria-label="Decoration options"></div>
            </div>
            <div id="designer-summary" class="designer-summary"></div>
            <button id="designer-apply" type="button" disabled>Apply design to selected room</button>
          </section>
          <section id="panel-room-management" class="built-rooms-panel" aria-label="Built rooms">
            <h3>Room Management</h3>
            <p class="built-rooms-intro">Select an existing room to resize it, swap interiors, or add new equipment and decor.</p>
            <ul id="built-rooms" class="built-room-list"></ul>
          </section>
          <div class="build-hint" id="build-hint">Click on the hospital grid to place a room.</div>
        </section>

        <section id="tab-staff" class="tab-panel" role="tabpanel">
          <h2>Manage Staff</h2>
          <div id="panel-staff-hire" class="staff-hire">
            <h3>Hire Staff</h3>
            <div id="staff-candidates" class="card-list"></div>
          </div>
          <div id="panel-staff-roster" class="staff-roster">
            <h3>Roster</h3>
            <ul id="staff-roster"></ul>
          </div>
        </section>

        <section id="tab-research" class="tab-panel" role="tabpanel">
          <h2>Research &amp; Development</h2>
          <p>Invest in new treatments and facility upgrades to stay ahead.</p>
          <ul id="research-projects" class="card-list"></ul>
        </section>

        <section id="tab-marketing" class="tab-panel" role="tabpanel">
          <h2>Public Relations &amp; Marketing</h2>
          <p>Launch campaigns to attract specific patient groups and investors.</p>
          <ul id="marketing-campaigns" class="card-list"></ul>
        </section>
      </section>

      <section class="playfield" aria-label="Hospital layout">
        <div class="blueprint-wrapper" aria-label="Construction blueprint">
          <header class="blueprint-header">
            <div class="blueprint-header__row">
              <h2>Pulse Point Live Hospital</h2>
              <div class="blueprint-header__actions">
                <button class="blueprint-info-button" type="button" id="open-lot-overview">
                  Lot overview &amp; tips
                </button>
                <div class="view-switcher" role="radiogroup" aria-label="Hospital view">
                  <button class="view-switcher__button" type="button" data-view-mode="blueprint" aria-pressed="false">
                    Blueprint
                  </button>
                  <button
                    class="view-switcher__button active"
                    type="button"
                    data-view-mode="showcase"
                    aria-pressed="true"
                  >
                    Live Hospital
                  </button>
                </div>
              </div>
            </div>
            <div class="blueprint-legend" aria-hidden="true">
              <span><span class="legend-swatch empty"></span> Empty plot</span>
              <span><span class="legend-swatch buildable"></span> Build target</span>
              <span><span class="legend-swatch occupied"></span> Built room</span>
              <span><span class="legend-swatch locked"></span> Locked parcel</span>
            </div>
          </header>
          <div class="blueprint-gridwrap">
            <div id="axis-x" class="axis axis-x" aria-hidden="true"></div>
            <div id="axis-y" class="axis axis-y" aria-hidden="true"></div>
            <div class="grid-stage">
              <div class="grid-backdrop" aria-hidden="true"></div>
              <div id="grid" class="grid" role="grid" aria-label="Hospital floor plan"></div>
            </div>
          </div>
          <div id="blueprint-footnote" class="blueprint-footnote">
            Pick a room on the Build tab to start construction. Expand the campus by purchasing parcels in Hospital
            Grounds.
          </div>
        </div>
        <canvas
          id="hospital-canvas"
          width="672"
          height="448"
          aria-label="Hospital rendered floorplan"
        ></canvas>
        <div class="hospital-zoom-controls" id="hospital-zoom-controls" hidden aria-live="polite">
          <span id="hospital-zoom-indicator">100%</span>
          <button type="button" id="reset-hospital-zoom" class="hospital-zoom-reset">Reset view</button>
        </div>
        <p class="hospital-view-hint" id="hospital-view-hint">Scroll to zoom • Drag to pan • Double-click to reset</p>
      </section>

      <aside class="sidebar secondary" aria-label="Operations">
        <section>
          <h2>Patient Queue</h2>
          <ul id="patient-queue" class="queue-list"></ul>
        </section>
        <section>
          <h2>Objectives</h2>
          <ul id="objectives" class="objectives"></ul>
        </section>
        <section>
          <h2>Daily Report</h2>
          <div id="daily-report"></div>
        </section>
        <section>
          <h2>Billing Ledger</h2>
          <ul id="billing-ledger" class="ledger-list"></ul>
        </section>
        <section>
          <h2>Event Log</h2>
          <ul id="event-log" class="event-log"></ul>
        </section>
      </aside>
    </main>
  </div>

  <template id="candidate-template">
    <div class="card">
      <h4 class="name"></h4>
      <p class="role"></p>
      <p class="traits"></p>
      <button class="hire-button">Hire - ¤<span class="cost"></span></button>
    </div>
  </template>

  <template id="research-template">
    <div class="card">
      <h4 class="name"></h4>
      <p class="desc"></p>
      <div class="progress-row">
        <progress max="100" value="0"></progress>
        <button class="invest-button">Invest ¤<span class="cost"></span></button>
      </div>
    </div>
  </template>

  <template id="campaign-template">
    <div class="card">
      <h4 class="name"></h4>
      <p class="desc"></p>
      <button class="launch-button">Launch ¤<span class="cost"></span></button>
    </div>
  </template>

  <script src="main.js" type="module"></script>

  <div id="save-modal" class="save-menu" aria-hidden="true">
    <div class="save-menu__backdrop" data-close-save></div>
    <div class="save-menu__panel" role="dialog" aria-modal="true" aria-labelledby="save-menu-title">
      <header class="save-menu__header">
        <h2 id="save-menu-title">Save &amp; Load</h2>
        <p>Store snapshots of your hospital, including staff, research, finances, and room designs.</p>
      </header>
      <div class="save-menu__body">
        <p id="save-menu-message" class="save-menu__message" hidden></p>
        <ul id="save-slot-list" class="save-slot-list" role="list"></ul>
      </div>
      <footer class="save-menu__footer">
        <button type="button" class="save-menu__close" data-close-save id="save-menu-close">Close</button>
      </footer>
    </div>
  </div>

  <div id="lot-overview-menu" class="info-menu" aria-hidden="true">
    <div class="info-menu__backdrop" data-close-lot-overview></div>
    <section
      class="info-menu__panel"
      role="dialog"
      aria-modal="true"
      aria-labelledby="lot-overview-title"
    >
      <header class="info-menu__header">
        <h2 id="lot-overview-title" tabindex="-1">Campus lot overview</h2>
        <p>
          Watch the campus hum in real time as patients and staff flow between rooms. Toggle back to the
          construction blueprint whenever you need precise tile-by-tile planning.
        </p>
      </header>
      <div class="info-menu__body">
        <p class="info-menu__intro">
          Use the lot overview to inspect each parcel, understand how it expands the blueprint, and decide where to
          invest next.
        </p>
        <ul id="lot-overview-list" class="lot-overview-list"></ul>
      </div>
      <footer class="info-menu__footer">
        <button type="button" class="info-menu__close" data-close-lot-overview>Close</button>
      </footer>
    </section>
  </div>
</body>
</html>
