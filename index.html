<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pulse Point Hospital</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div id="app">
    <header>
      <h1>Pulse Point Hospital</h1>
      <div class="stats">
        <div>Day <span id="stat-day">1</span></div>
        <div>Cash <span id="stat-cash">US$150,000</span></div>
        <div>Reputation <span id="stat-reputation">50</span></div>
        <div>Patients Treated <span id="stat-treated">0</span></div>
        <div>Environment <span id="stat-environment">55</span></div>
        <div>Patient Welfare <span id="stat-welfare">55</span></div>
      </div>
    </header>

    <main>
      <aside class="menu-rail" aria-label="Primary navigation">
        <div class="menu-block">
          <h2 class="menu-heading">Functions</h2>
          <nav class="tabs" role="tablist">
            <button class="tab-button active" data-tab="overview" role="tab">Overview</button>
            <button class="tab-button" data-tab="build" role="tab">Build</button>
            <button class="tab-button" data-tab="staff" role="tab">Staff</button>
            <button class="tab-button" data-tab="research" role="tab">Research</button>
            <button class="tab-button" data-tab="marketing" role="tab">Marketing</button>
            <button class="tab-button" data-tab="departments" role="tab">Departments</button>
          </nav>
        </div>
        <div class="menu-block">
          <h2 class="menu-heading">Options</h2>
          <div class="menu-options" role="list">
            <button
              class="menu-option"
              role="listitem"
              data-tab-target="overview"
              data-panel="#panel-policies"
            >
              Hospital Policies
            </button>
            <button
              class="menu-option"
              role="listitem"
              data-tab-target="overview"
              data-panel="#panel-finance"
            >
              Finance &amp; Loans
            </button>
            <button
              class="menu-option"
              role="listitem"
              data-tab-target="build"
              data-panel="#panel-grounds"
            >
              Ground Expansion
            </button>
            <button
              class="menu-option"
              role="listitem"
              data-tab-target="build"
              data-panel="#panel-designer"
            >
              Room Designer
            </button>
            <button
              class="menu-option"
              role="listitem"
              data-tab-target="build"
              data-panel="#panel-room-management"
            >
              Room Management
            </button>
            <button
              class="menu-option"
              role="listitem"
              data-tab-target="staff"
              data-panel="#panel-staff-hire"
            >
              Staff Hiring
            </button>
            <button
              class="menu-option"
              role="listitem"
              data-tab-target="staff"
              data-panel="#panel-staff-roster"
            >
              Staff Roster
            </button>
            <button
              class="menu-option"
              role="listitem"
              data-tab-target="research"
              data-panel="#tab-research"
            >
              Research Projects
            </button>
            <button
              class="menu-option"
              role="listitem"
              data-tab-target="marketing"
              data-panel="#tab-marketing"
            >
              Marketing Campaigns
            </button>
          </div>
        </div>
        <div class="menu-block">
          <h2 class="menu-heading">Departments</h2>
          <div class="menu-options" role="list">
            <button
              class="menu-option"
              role="listitem"
              data-tab-target="departments"
              data-panel="#department-detail"
              data-department-target="marketing"
            >
              Marketing Department
            </button>
            <button
              class="menu-option"
              role="listitem"
              data-tab-target="departments"
              data-panel="#department-detail"
              data-department-target="debt"
            >
              Debt &amp; Receivables
            </button>
            <button
              class="menu-option"
              role="listitem"
              data-tab-target="departments"
              data-panel="#department-detail"
              data-department-target="emergency"
            >
              Emergency Medicine
            </button>
            <button
              class="menu-option"
              role="listitem"
              data-tab-target="departments"
              data-panel="#department-detail"
              data-department-target="radiology"
            >
              Radiology &amp; Diagnostics
            </button>
            <button
              class="menu-option"
              role="listitem"
              data-tab-target="departments"
              data-panel="#department-detail"
              data-department-target="surgery"
            >
              Surgical Services
            </button>
            <button
              class="menu-option"
              role="listitem"
              data-tab-target="departments"
              data-panel="#department-detail"
              data-department-target="wellness"
            >
              Family &amp; Wellness
            </button>
          </div>
        </div>
        <div class="menu-block">
          <h2 class="menu-heading">Game</h2>
          <div class="menu-options">
            <button
              class="menu-option"
              data-modal="save"
              data-tab-target="*"
              id="open-save-menu"
              type="button"
            >
              Save &amp; Load
            </button>
            <button
              class="menu-option"
              id="toggle-music"
              type="button"
              aria-pressed="true"
              data-audio-toggle
            >
              Music: On
            </button>
            <button
              class="menu-option"
              id="toggle-sfx"
              type="button"
              aria-pressed="true"
              data-audio-toggle
            >
              Sound Effects: On
            </button>
          </div>
        </div>
      </aside>

      <section class="sidebar tab-content" aria-label="Game controls">
        <section id="tab-overview" class="tab-panel active" role="tabpanel">
          <div class="overview-note">
            <h2>Hospital Pulse on the operations rail</h2>
            <p>
              Keep the live campus front and center—the quick stats now sit to the right so you can monitor
              cleanliness, morale, and grounds without shrinking the view.
            </p>
          </div>
          <div class="overview-divider" aria-hidden="true"></div>
          <div class="policies" id="panel-policies">
            <h3>Hospital Policies</h3>
            <label>
              <input type="checkbox" id="policy-fast-track" />
              Fast-track emergency patients (higher cost, reputation boost)
            </label>
            <label>
              <input type="checkbox" id="policy-overtime" />
              Offer overtime pay (reduces morale loss, adds wage cost)
            </label>
          </div>
          <section id="panel-finance" class="finance-panel" aria-label="Hospital finance options">
            <h3>Finance &amp; Billing</h3>
            <p>Secure loans for expansion and monitor how patients settle their care costs.</p>
            <div class="loan-offers" id="loan-offers"></div>
            <div class="finance-status">
              <div>
                <h4>Active Loans</h4>
                <ul id="active-loans" class="loan-list"></ul>
              </div>
              <div>
                <h4>Patient Receivables</h4>
                <div id="receivables-summary" class="receivables-summary"></div>
              </div>
            </div>
          </section>
        </section>

        <section id="tab-build" class="tab-panel" role="tabpanel">
          <h2>Build Rooms</h2>
          <p>Select a room type and tailor its layout, interior, and equipment before placing it on the grid.</p>
          <section id="panel-grounds" class="property-panel" aria-label="Hospital grounds">
            <h3>Hospital Grounds</h3>
            <p class="property-intro">
              Purchase additional lots to expand the buildable blueprint. Owned parcels are listed below.
            </p>
            <ul id="property-owned" class="property-owned"></ul>
            <div id="property-market" class="property-market"></div>
          </section>
          <div class="build-menu" id="build-menu">
            <div class="build-menu__tabs" role="tablist" aria-label="Build categories">
              <button
                type="button"
                class="build-menu__tab active"
                data-build-tab="rooms"
                role="tab"
                aria-selected="true"
              >
                Rooms
              </button>
              <button
                type="button"
                class="build-menu__tab"
                data-build-tab="structure"
                role="tab"
                aria-selected="false"
              >
                Structure
              </button>
              <button
                type="button"
                class="build-menu__tab"
                data-build-tab="interiors"
                role="tab"
                aria-selected="false"
              >
                Interiors
              </button>
              <button
                type="button"
                class="build-menu__tab"
                data-build-tab="amenities"
                role="tab"
                aria-selected="false"
              >
                Amenities
              </button>
            </div>
            <div class="build-menu__panel active" id="build-menu-rooms" role="tabpanel"></div>
            <div class="build-menu__panel" id="build-menu-structure" role="tabpanel" aria-hidden="true"></div>
            <div class="build-menu__panel" id="build-menu-interiors" role="tabpanel" aria-hidden="true"></div>
            <div class="build-menu__panel" id="build-menu-amenities" role="tabpanel" aria-hidden="true"></div>
          </div>
          <section id="panel-designer" class="designer-panel" aria-label="Room designer">
            <h3>Room Designer</h3>
            <div class="designer-row">
              <label for="designer-size">Layout Size</label>
              <select id="designer-size"></select>
            </div>
            <div class="designer-row">
              <label for="designer-theme">Interior Theme</label>
              <select id="designer-theme"></select>
            </div>
            <div class="designer-row">
              <h4>Equipment</h4>
              <div id="designer-machines" class="designer-options" role="group" aria-label="Equipment options"></div>
            </div>
            <div class="designer-row">
              <h4>Decorations</h4>
              <div id="designer-decor" class="designer-options" role="group" aria-label="Decoration options"></div>
            </div>
            <div id="designer-summary" class="designer-summary"></div>
            <button id="designer-apply" type="button" disabled>Apply design to selected room</button>
          </section>
          <section id="panel-room-management" class="built-rooms-panel" aria-label="Built rooms">
            <h3>Room Management</h3>
            <p class="built-rooms-intro">Select an existing room to resize it, swap interiors, or add new equipment and decor.</p>
            <ul id="built-rooms" class="built-room-list"></ul>
          </section>
          <div class="build-hint" id="build-hint">Select a room blueprint, then drag directly on the hospital floor to place it.</div>
        </section>

        <section id="tab-departments" class="tab-panel" role="tabpanel">
          <h2>Department Controls</h2>
          <p>
            Direct budgets and staffing priorities for each hospital department. Adjust focus
            spending to react to patient demand while keeping costs realistic.
          </p>
          <div id="panel-departments" class="department-panel" aria-live="polite">
            <div class="department-legend">
              <p>
                Use the focus slider to set funding level. Standby pauses a department, while Surge
                delivers maximum coverage at a higher daily cost. Toggle a department off to reroute
                resources temporarily.
              </p>
            </div>
            <div class="department-layout">
              <nav
                id="department-menu"
                class="department-menu"
                aria-label="Department controls"
                role="tablist"
              ></nav>
              <div
                id="department-detail"
                class="department-detail"
                role="tabpanel"
                aria-live="polite"
              ></div>
            </div>
          </div>
        </section>

        <section id="tab-staff" class="tab-panel" role="tabpanel">
          <h2>Manage Staff</h2>
          <div id="panel-staff-hire" class="staff-hire">
            <h3>Hire Staff</h3>
            <div id="staff-candidates" class="card-list"></div>
          </div>
          <div id="panel-staff-roster" class="staff-roster">
            <h3>Roster</h3>
            <ul id="staff-roster"></ul>
          </div>
        </section>

        <section id="tab-research" class="tab-panel" role="tabpanel">
          <h2>Research &amp; Development</h2>
          <p>Invest in new treatments and facility upgrades to stay ahead.</p>
          <ul id="research-projects" class="card-list"></ul>
        </section>

        <section id="tab-marketing" class="tab-panel" role="tabpanel">
          <h2>Public Relations &amp; Marketing</h2>
          <p>Launch campaigns to attract specific patient groups and investors.</p>
          <ul id="marketing-campaigns" class="card-list"></ul>
        </section>
      </section>

      <section class="playfield" aria-label="Hospital layout">
        <div id="live-build-overlay" class="live-build-overlay" aria-live="polite">
          <div class="live-build-status">
            <div class="live-build-status__row">
              <div id="live-build-hint" class="live-build-hint">
              Select a room blueprint, then drag on the hospital floor to draw it to size.
              </div>
              <button class="live-build-lots" type="button" id="open-lot-overview">Lot overview &amp; tips</button>
            </div>
            <div id="live-build-footnote" class="live-build-footnote">
              All construction now happens directly in the live hospital view—hold and drag like Theme Hospital to set the footprint.
            </div>
          </div>
          <div id="live-build-rooms" class="live-build-palette" role="radiogroup" aria-label="Room blueprints"></div>
        </div>
        <canvas
          id="hospital-canvas"
          width="672"
          height="448"
          aria-label="Hospital rendered floorplan"
        ></canvas>
        <aside id="patient-detail" class="patient-detail" aria-live="polite" hidden>
          <header class="patient-detail__header">
            <div>
              <h3 id="patient-detail-name">Patient name</h3>
              <p id="patient-detail-status" class="patient-detail__status">Waiting in queue</p>
            </div>
            <div class="patient-detail__profile">
              <span id="patient-detail-profile" class="patient-profile-badge">Profile</span>
              <button type="button" id="patient-detail-close" class="patient-detail__close" aria-label="Close patient card">
                ×
              </button>
            </div>
          </header>
          <dl class="patient-detail__stats">
            <div>
              <dt>Mood</dt>
              <dd id="patient-detail-mood">Calm</dd>
            </div>
            <div>
              <dt>Health</dt>
              <dd>
                <div class="patient-detail__meter">
                  <progress id="patient-detail-health" max="100" value="70"></progress>
                  <span id="patient-detail-health-value">70%</span>
                </div>
              </dd>
            </div>
            <div>
              <dt>Diagnosis</dt>
              <dd>
                <div class="patient-detail__meter">
                  <progress id="patient-detail-diagnosis" max="100" value="45"></progress>
                  <span id="patient-detail-diagnosis-value">45%</span>
                </div>
              </dd>
            </div>
            <div>
              <dt>Patience</dt>
              <dd>
                <div class="patient-detail__meter">
                  <progress id="patient-detail-patience" max="180" value="90"></progress>
                  <span id="patient-detail-patience-value">90</span>
                </div>
              </dd>
            </div>
          </dl>
          <section class="patient-detail__section">
            <h4>Current Concern</h4>
            <p id="patient-detail-ailment">Ailment description</p>
            <p id="patient-detail-queue" class="patient-detail__queue">Queue position</p>
          </section>
          <section class="patient-detail__section">
            <h4>Recent Cures</h4>
            <ul id="patient-detail-cures" class="patient-detail__cures"></ul>
            <p id="patient-detail-cures-empty" class="patient-detail__empty" hidden>
              No treatments recorded yet.
            </p>
          </section>
          <section class="patient-detail__section">
            <h4>Notes</h4>
            <p id="patient-detail-notes">Patients explore the lobby while they wait.</p>
          </section>
        </aside>
        <div class="hospital-zoom-controls" id="hospital-zoom-controls" hidden aria-live="polite">
          <span id="hospital-zoom-indicator">100%</span>
          <button type="button" id="reset-hospital-zoom" class="hospital-zoom-reset">Reset view</button>
        </div>
        <p class="hospital-view-hint" id="hospital-view-hint">Scroll to zoom • Drag to pan • Double-click to reset</p>
      </section>

      <aside class="sidebar secondary" aria-label="Operations">
        <section class="hospital-pulse-panel" aria-label="Hospital pulse">
          <div class="hospital-pulse-panel__header">
            <div>
              <h2>Hospital Pulse</h2>
              <p>Live vitals update as patients and staff flow through the campus.</p>
            </div>
            <button
              type="button"
              id="open-hospital-overview"
              class="hospital-pulse-panel__button overview-dashboard-button"
            >
              Open dashboard
            </button>
          </div>
          <div class="hospital-pulse-grid overview-mini-grid" role="list">
            <article class="overview-mini-card" role="listitem">
              <h3>Cleanliness</h3>
              <p><span id="overview-cleanliness">80%</span></p>
            </article>
            <article class="overview-mini-card" role="listitem">
              <h3>Efficiency</h3>
              <p><span id="overview-efficiency">65%</span></p>
            </article>
            <article class="overview-mini-card" role="listitem">
              <h3>Staff Morale</h3>
              <p><span id="overview-morale">70%</span></p>
            </article>
            <article class="overview-mini-card" role="listitem">
              <h3>Grounds Care</h3>
              <p><span id="overview-grounds">72%</span></p>
            </article>
            <article class="overview-mini-card" role="listitem">
              <h3>Plant Health</h3>
              <p><span id="overview-plants">78%</span></p>
            </article>
          </div>
        </section>
        <section>
          <h2>Patient Queue</h2>
          <ul id="patient-queue" class="queue-list"></ul>
        </section>
        <section>
          <h2>Objectives</h2>
          <ul id="objectives" class="objectives"></ul>
        </section>
        <section>
          <h2>Daily Report</h2>
          <div id="daily-report"></div>
        </section>
        <section>
          <h2>Billing Ledger</h2>
          <ul id="billing-ledger" class="ledger-list"></ul>
        </section>
        <section>
          <h2>Event Log</h2>
          <ul id="event-log" class="event-log"></ul>
        </section>
      </aside>
    </main>
  </div>

  <template id="candidate-template">
    <div class="card">
      <h4 class="name"></h4>
      <p class="role"></p>
      <p class="traits"></p>
      <button class="hire-button">Hire - <span class="cost"></span></button>
    </div>
  </template>

  <template id="research-template">
    <div class="card">
      <h4 class="name"></h4>
      <p class="desc"></p>
      <div class="progress-row">
        <progress max="100" value="0"></progress>
        <button class="invest-button">Invest <span class="cost"></span></button>
      </div>
    </div>
  </template>

  <template id="campaign-template">
    <div class="card">
      <h4 class="name"></h4>
      <p class="desc"></p>
      <button class="launch-button">Launch <span class="cost"></span></button>
    </div>
  </template>

  <script src="main.js" type="module"></script>

  <div id="save-modal" class="save-menu" aria-hidden="true">
    <div class="save-menu__backdrop" data-close-save></div>
    <div class="save-menu__panel" role="dialog" aria-modal="true" aria-labelledby="save-menu-title">
      <header class="save-menu__header">
        <h2 id="save-menu-title">Save &amp; Load</h2>
        <p>Store snapshots of your hospital, including staff, research, finances, and room designs.</p>
      </header>
      <div class="save-menu__body">
        <p id="save-menu-message" class="save-menu__message" hidden></p>
        <ul id="save-slot-list" class="save-slot-list" role="list"></ul>
      </div>
      <footer class="save-menu__footer">
        <button type="button" class="save-menu__close" data-close-save id="save-menu-close">Close</button>
      </footer>
    </div>
  </div>

  <div id="lot-overview-menu" class="info-menu" aria-hidden="true">
    <div class="info-menu__backdrop" data-close-lot-overview></div>
    <section
      class="info-menu__panel"
      role="dialog"
      aria-modal="true"
      aria-labelledby="lot-overview-title"
    >
      <header class="info-menu__header">
        <h2 id="lot-overview-title" tabindex="-1">Campus lot overview</h2>
        <p>
          Watch the campus hum in real time as patients and staff flow between rooms. Toggle back to the
          construction blueprint whenever you need precise tile-by-tile planning.
        </p>
      </header>
      <div class="info-menu__body">
        <p class="info-menu__intro">
          Use the lot overview to inspect each parcel, understand how it expands the blueprint, and decide where to
          invest next.
        </p>
        <ul id="lot-overview-list" class="lot-overview-list"></ul>
      </div>
      <footer class="info-menu__footer">
        <button type="button" class="info-menu__close" data-close-lot-overview>Close</button>
      </footer>
    </section>
  </div>

  <div id="hospital-overview-menu" class="info-menu" aria-hidden="true">
    <div class="info-menu__backdrop" data-close-hospital-overview></div>
    <section
      class="info-menu__panel"
      role="dialog"
      aria-modal="true"
      aria-labelledby="hospital-overview-title"
    >
      <header class="info-menu__header">
        <h2 id="hospital-overview-title" tabindex="-1">Hospital dashboard</h2>
        <p>Compare vitals, track patient flow, and keep the grounds in Theme Hospital style.</p>
      </header>
      <div class="info-menu__body">
        <div class="overview-meter-grid">
          <div class="meter">
            <label for="meter-cleanliness">Cleanliness</label>
            <progress id="meter-cleanliness" value="80" max="100"></progress>
          </div>
          <div class="meter">
            <label for="meter-efficiency">Efficiency</label>
            <progress id="meter-efficiency" value="65" max="100"></progress>
          </div>
          <div class="meter">
            <label for="meter-morale">Staff Morale</label>
            <progress id="meter-morale" value="70" max="100"></progress>
          </div>
          <div class="meter">
            <label for="meter-grounds">Grounds Care</label>
            <progress id="meter-grounds" value="72" max="100"></progress>
          </div>
          <div class="meter">
            <label for="meter-plants">Plant Health</label>
            <progress id="meter-plants" value="78" max="100"></progress>
          </div>
        </div>
        <ul id="hospital-overview-metrics" class="overview-metric-list"></ul>
      </div>
      <footer class="info-menu__footer">
        <button type="button" class="info-menu__close" data-close-hospital-overview>Close</button>
      </footer>
    </section>
  </div>
</body>
</html>
